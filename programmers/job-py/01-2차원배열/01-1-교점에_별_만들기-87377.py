# ðŸ’¡ êµì ì— ë³„ ë§Œë“¤ê¸°(Lv2) ðŸ“š https://school.programmers.co.kr/learn/courses/30/lessons/87377
"""
1. ì£¼ì–´ì§„ ì§ì„ ì—ì„œ êµì ì„ êµ¬í•©ë‹ˆë‹¤.
    - ë¬¸ì œ ì„¤ëª…ì˜ êµì  ê³µì‹ì„ ì´ìš©í•´ ì£¼ì–´ì§„ ëª¨ë“  êµì ì„ êµ¬í•˜ê¸°
    -  x = (b * f - e * d) / (a * d - b * c)
2. ê·¸ ì¤‘ ì •ìˆ˜ êµì ë§Œ ë”°ë¡œ ë³€ìˆ˜ë¡œ ì €ìž¥í•©ë‹ˆë‹¤.
3. êµì ì„ ëª¨ë‘ í‘œí˜„í•  ìˆ˜ ìžˆëŠ” ìµœì†Œí•œì˜ ì‚¬ê°í˜•ì„ ì•Œì•„ëƒ…ë‹ˆë‹¤.
4. ëª¨ë“  êµì ì„ *ë¡œ ì°ì–´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.
5. ë°°ì—´ì„ ê±°ê¾¸ë¡œ ë’¤ì§‘ì–´ ë°˜í™˜
"""


def solution(line):
    intersections, answer = [], []
    numOfLine = len(line)

    # 2ê°œì˜ ë³€ìˆ˜ ëª¨ë‘ ë§¤ìš° í° ì •ìˆ˜ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”, int(1e15)ëŠ” 10ì˜ 15ìŠ¹ì„ ì˜ë¯¸í•˜ë©°, ë§¤ìš° í° ì–‘ìˆ˜ ê°’
    x_min = y_min = int(1e15)

    # 2ê°œì˜ ë³€ìˆ˜ ëª¨ë‘ ë§¤ìš° ìž‘ì€ ìŒìˆ˜ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”, -int(1e15)ëŠ” -10ì˜ 15ìŠ¹ì„ ì˜ë¯¸í•˜ë©°, ë§¤ìš° í° ìŒìˆ˜ ê°’
    x_max = y_max = -int(1e15)

    # ðŸ“Œ (1) ì£¼ì–´ì§„ ì§ì„ ì—ì„œ êµì ì„ êµ¬í•©ë‹ˆë‹¤.
    for i in range(numOfLine):
        a, b, e = line[i]  # ìˆœíšŒí•˜ë©´ì„œ ê° ì„ ë“¤ì˜ ê°’ë“¤ì„ ë°›ì•„ì˜´, 2, -1, 4ë¶€í„° ì­‰
        for j in range(i + 1, numOfLine):
            c, d, f = line[j]
            if a * d == b * c:
                continue

            # ë‘ ì§ì„ ì˜ êµì ì´ ìœ ì¼í•˜ê²Œ ì¡´ìž¬í•  ê²½ìš°, ê·¸ êµì  êµ¬í•˜ëŠ” ê³µì‹
            x = (b * f - e * d) / (a * d - b * c)
            y = (e * c - a * f) / (a * d - b * c)

            # ðŸ“Œ (2) ê·¸ ì¤‘ ì •ìˆ˜ êµì ë§Œ ë”°ë¡œ ë³€ìˆ˜ë¡œ ì €ìž¥í•©ë‹ˆë‹¤.
            if x == int(x) and y == int(y):
                x = int(x)
                y = int(y)
                intersections.append([x, y])

                # ðŸ“Œ (3) êµì ì„ ëª¨ë‘ í‘œí˜„í•  ìˆ˜ ìžˆëŠ” ìµœì†Œí•œì˜ ì‚¬ê°í˜•ì„ ì•Œì•„ëƒ…ë‹ˆë‹¤.
                if x_min > x:
                    x_min = x
                if y_min > y:
                    y_min = y
                if x_max < x:
                    x_max = x
                if y_max < y:
                    y_max = y

    # ðŸ“Œ (4) ëª¨ë“  êµì ì„ *ë¡œ ì°ì–´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.
    x_len = x_max - x_min + 1  # e.g.1) 9 = 4 - (-4) + 1
    y_len = y_max - y_min + 1  # e.g.1) 9 = 4 - (-4) + 1
    grid = [["."] * x_len for _ in range(y_len)]

    # intersections(êµì°¨ì ë“¤) : e.g.1) [[0, 4], [-4, -4], [4, -4], [4, 1], [-4, 1]]
    for star_x, star_y in intersections:
        # x_minì´ ìŒìˆ˜ì¸ ê²½ìš°, star_xì— x_minì˜ ì ˆëŒ“ê°’ì„ ë”í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ star_xì—ì„œ x_minì„ ëºŒ
        # ì´ë ‡ê²Œ í•˜ë©´ nxì—ëŠ” star_xë¥¼ x_minë§Œí¼ ì´ë™í•œ ìƒˆë¡œìš´ x ì¢Œí‘œê°€ ì €ìž¥ë¨
        nx = star_x + abs(x_min) if x_min < 0 else star_x - x_min
        ny = star_y + abs(y_min) if y_min < 0 else star_y - y_min

        # nxì™€ ny ì¢Œí‘œë¥¼ ì‚¬ìš©í•˜ì—¬ gridì˜ í•´ë‹¹ ìœ„ì¹˜ì— ë³„í‘œ(*)ë¥¼ ì¶”ê°€
        grid[ny][nx] = "*"

    # ðŸ“Œ (5) ë°°ì—´ì„ ê±°ê¾¸ë¡œ ë’¤ì§‘ì–´ ë°˜í™˜ (ë°°ì—´ê³¼ ì¢Œí‘œëŠ” í–‰ì´ ì¦ê°€í•˜ëŠ” ë°©í–¥ì´ ë°˜ëŒ€ì´ë‹¤. ë”°ë¼ì„œ ìœ„ ì•„ëž˜ë¥¼ ë’¤ì§‘ì–´ì„œ ì œì¶œ)
    for row in grid:
        answer.append("".join(row))  # ë¬¸ìžì—´ì„ 2~3ê°œ ì´ìƒ í•©ì¹œë‹¤ë©´ ' '.join( )ì„ ì‚¬ìš©

    # print(answer)
    # ['*.......*', '.........', '.........', '.........', '.........', '*.......*', '.........', '.........', '....*....']

    return answer[::-1]


print(solution([[2, -1, 4], [-2, -1, 4], [0, -1, 1], [5, -8, -12], [5, 8, 12]]))
# ['....*....', '.........', '.........', '*.......*', '.........', '.........', '.........', '.........', '*.......*']
# print(solution([[0, 1, -1], [1, 0, -1], [1, 0, 1]]))
