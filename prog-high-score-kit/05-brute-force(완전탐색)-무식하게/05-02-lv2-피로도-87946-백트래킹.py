# ğŸ“š https://school.programmers.co.kr/learn/courses/30/lessons/87946
"""
ìœ ì €ì˜ í˜„ì¬ í”¼ë¡œë„ kì™€ 
ê° ë˜ì „ë³„ "ìµœì†Œ í•„ìš” í”¼ë¡œë„", "ì†Œëª¨ í”¼ë¡œë„"ê°€ ë‹´ê¸´ 2ì°¨ì› ë°°ì—´ dungeonsê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, 
ìœ ì €ê°€ íƒí—˜í• ìˆ˜ ìˆëŠ” ìµœëŒ€ ë˜ì „ ìˆ˜ë¥¼ return

ì…ë ¥#1
k        : 80
dungeons : [[80, 20], [50, 40], [30, 10]]

ì¶œë ¥#1
3

ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…#1
ì²« ë²ˆì§¸ â†’ ë‘ ë²ˆì§¸ â†’ ì„¸ ë²ˆì§¸ ë˜ì „ ìˆœì„œë¡œ íƒí—˜í•œë‹¤ë©´ 2ë²ˆë°–ì— ëª»í•¨
ì²« ë²ˆì§¸ â†’ ì„¸ ë²ˆì§¸ â†’ ë‘ ë²ˆì§¸ ë˜ì „ ìˆœì„œë¡œ íƒí—˜í•œë‹¤ë©´ 3ë²ˆ ê°€ëŠ¥
"""

answer = 0
N = 0
visited = []


def dfs(k, cnt, dungeons):
    global answer
    # ìµœëŒ€ ë°©ë¬¸ íšŸìˆ˜ ì´ˆê¸°í™”
    if cnt > answer:
        answer = cnt
    # ë°©ë¬¸ ì‹œì‘ ì  ì„¤ì •
    # DFSë¡œ íƒìƒ‰ì´ ëë‚˜ê³ , ë‹¤ë¥¸ ì‹œì‘ ì ìœ¼ë¡œ íƒìƒ‰ ì‹œì‘
    for j in range(N):
        # í”¼ë¡œë„ê°€ ì¶©ë¶„í•´ì„œ ë°©ë¬¸í•  ìˆ˜ ìˆì§€ë§Œ, ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ê²½ìš°
        if k >= dungeons[j][0] and not visited[j]:
            # ë°©ë¬¸ ì²˜ë¦¬
            visited[j] = 1
            # ì¤„ì–´ë“  í”¼ë¡œë„ë¡œ ë˜ì „ ë°©ë¬¸ ì‹œì‘
            dfs(k - dungeons[j][1], cnt + 1, dungeons)
            # í•´ë‹¹ ìˆœì„œë¡œ ë˜ì „ì„ ëª¨ë‘ ë°©ë¬¸í–ˆìœ¼ë‹ˆ, ë‹¤ì‹œ ì´ˆê¸°í™”
            visited[j] = 0


def solution(k, dungeons):
    global N, visited
    N = len(dungeons)
    visited = [0] * N
    dfs(k, 0, dungeons)
    return answer


print(solution(80, [[80, 20], [50, 40], [30, 10]]))
